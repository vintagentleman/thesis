\documentclass[
    specialist,  % Тип документа
    href,        % Использовать пакет hyperref для создания гиперссылок
    subf,        % Использовать пакет subcaption для вложенной нумерации рисунков
    colorlinks   % Цветные гиперссылки
]{disser}

\usepackage[
    a4paper, includefoot,
    left = 2cm, right = 2cm,
    top = 2cm, bottom = 2cm,
    headsep = 1cm, footskip = 1cm
]{geometry}

% Настройка локализации и переносов
\usepackage[X2, T1, T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english, russian]{babel}
\usepackage[autostyle]{csquotes}

% Команда для доступа к расширенной кириллице
\newcommand{\old}{\fontencoding{X2}\selectfont}

% Глубина оглавления
\setcounter{tocdepth}{2}

% Нумерация страниц снизу и по центру
\pagestyle{footcenter}
\chapterpagestyle{footcenter}

% Спецсимволы
\usepackage{textcomp}

% Сноски
\usepackage[bottom]{footmisc}
\usepackage{chngcntr}
\counterwithout{footnote}{chapter}

% Списки
\usepackage{paralist}
\setdefaultleftmargin{5ex}{}{}{}{}{}

% Таблицы
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{makecell}
\renewcommand\theadfont{\bfseries}

% Графика
\usepackage{graphicx}
\usepackage{subcaption}
\graphicspath{{fig/}}

% Код
\usepackage{fancyvrb}

% Библиография
\usepackage{csquotes}
\usepackage[
    backend = biber,       % Движок
    bibencoding = utf8,    % Кодировка файлов с библиографическими БД
    style = gost-numeric,  % Стиль цитирования по ГОСТ
    language = auto,       % Получение языка из babel/polyglossia; ссылки на страницы на языке оригинала
    autolang = other,      % Многоязычная библиография
    clearlang = true,      % Внутренний сброс поля language при совпадении с языком из babel/polyglossia
    sortcites = true,      % Сортировка затекстовых ссылок при цитировании
    % minbibnames = 1,     % Число авторов, отображаемое при сокращении
    maxbibnames = 5        % Максимальное число авторов в препозиции
]{biblatex}

\addbibresource{./bib/scat.bib}
\addbibresource{./bib/stuff.bib}

% Сортировка библиографии
\DeclareSourcemap{
    \maps[datatype = bibtex]{
        \map{
            \step[fieldsource = langid, match = russian, final]
            \step[fieldset = presort, fieldvalue = {a}]
        }
        \map{
            \step[fieldsource = langid, notmatch = russian, final]
            \step[fieldset = presort, fieldvalue = {z}]
        }
    }
}

% Счётчик библиографических источников
\usepackage{totcount}
\newtotcounter{citnum}
\AtEveryBibitem{\stepcounter{citnum}}

\sloppy

\begin{document}

% Титульный лист, аннотация, оглавление
\input{title}
\input{abstract}
\tableofcontents

% Текст работы
\input{intro}
\input{1}
\input{2}
\input{3}
\input{concl}

% Библиография
\nocite{*}
\printbibliography[heading = bibintoc]

\end{document}
